<section class="login-page">
  <section class="login-bg">
    <img [src]="loginBg" alt="">
  </section>
  <section class="login-form-container">
    <form nz-form [formGroup]="loginRegisterForm" class="login-form" (ngSubmit)="submitForm()">
      <section class="login-form-tab" *ngIf="!register && !reset">
        <div [class]="['tab-title', item.type === activeLoginType && 'active' ]" (click)="switchLoginType(item)" *ngFor="let item of loginType " >{{ item.text }}</div>
      </section>
      <section class="login-form-tab" *ngIf="register && !reset " >
        <section class="tab-title active">注册</section>
      </section>
      <section class="login-form-tab" *ngIf="reset" >
        <section class="tab-title active">找回密码</section>
      </section>
      <!--账户密码登陆-->
      <section *ngIf="activeLoginType === 'ACCOUNT_PASSWORD' && !reset || register ">
        <nz-form-item *ngIf="!register">
          <nz-form-control nzErrorTip="请输入正确的用户名！">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input" nz-input formControlName="identifier" placeholder="请输入用户名" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="register">
          <nz-form-control nzErrorTip="请输入正确的用户名！">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input" nz-input formControlName="nickname" placeholder="请输入用户名" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control nzErrorTip="请输入正确的账户密码！">
            <nz-input-group >
              <input type="password" autocomplete [nzBorderless]="true" class="input" nz-input formControlName="credential" placeholder="请输入密码" (ngModelChange)="updateConfirmValidator()"/>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="register">
          <nz-form-control nzErrorTip="请再次输入正确的账户密码">
            <nz-input-group >
              <input type="password" autocomplete [nzBorderless]="true" class="input" nz-input formControlName="check_credential" placeholder="请再次输入密码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="!register">
          <nz-form-control nzErrorTip="请输入正确的验证码！" class="code">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input input-code" nz-input formControlName="imageCode" placeholder="请输入验证码" nz-col [nzSpan]="16" /><img class="code-img" (click)="switchImageCodeTokenEvent()" nz-col [nzSpan]="7" [src]="imageCodeToken" alt="获取图片验证码">
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <div nz-row class="login-form-margin" *ngIf="!register">
          <div nz-col [nzSpan]="12">
            <label nz-checkbox formControlName="remember" >
              <span>记住密码</span>
            </label>
          </div>
          <div nz-col [nzSpan]="12">
            <a class="login-form-forgot" (click)="reset=true" >忘记密码？</a>
          </div>
        </div>
      </section>
      <!--手机验证码登陆-->
      <section *ngIf="activeLoginType === 'PHONE_VERIFICATION' || register || reset ">
        <nz-form-item>
          <nz-form-control nzErrorTip="请输入正确的手机号码！">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input" nz-input formControlName="identifier" placeholder="请输入手机号码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="!register">
          <nz-form-control nzErrorTip="请输入正确的验证码！">
            <nz-input-group >
              <section class="get-code">
                <input type="text" [nzBorderless]="true" class="input input-code" nz-input formControlName="credential" placeholder="请输入验证码" nz-col [nzSpan]="16" />
                <span *ngIf="!smsConfig.isFlat; else smsCodeTemp" class="code-btn" nz-col [nzSpan]="7" (click)="fetchPhoneCodeInfo()">获取验证码</span>
                <ng-template #smsCodeTemp>
                  <span class="code-btn" nz-col [nzSpan]="7">{{smsConfig.time}}S后再次获取</span>
                </ng-template>
              </section>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="register">
          <nz-form-control nzErrorTip="请输入正确的验证码！">
            <nz-input-group >
              <section class="get-code">
                <input type="text" [nzBorderless]="true" class="input input-code" nz-input formControlName="smsCode" placeholder="请输入验证码" nz-col [nzSpan]="16" />
                <span *ngIf="!smsConfig.isFlat; else smsCodeTemp" class="code-btn" nz-col [nzSpan]="7" (click)="fetchPhoneCodeInfo()">获取验证码</span>
                <ng-template #smsCodeTemp>
                  <span class="code-btn" nz-col [nzSpan]="7">{{smsConfig.time}}S后再次获取</span>
                </ng-template>
              </section>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="reset">
          <nz-form-control nzErrorTip="请输入正确的账户密码！">
            <nz-input-group >
              <input type="password" autocomplete [nzBorderless]="true" class="input" nz-input formControlName="credential" placeholder="请输入新密码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="reset">
          <nz-form-control nzErrorTip="请再次输入正确的账户密码">
            <nz-input-group >
              <input type="password" autocomplete [nzBorderless]="true" class="input" nz-input formControlName="credential" placeholder="请再次输入新密码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="register">
          <nz-form-control nzErrorTip="请输入正确的QQ号码！">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input" nz-input formControlName="qq" placeholder="请输入QQ号码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item *ngIf="register">
          <nz-form-control nzErrorTip="请输入正确的微信号码!">
            <nz-input-group >
              <input type="text" [nzBorderless]="true" class="input" nz-input formControlName="wechat" placeholder="请输入微信号码" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
        <div nz-row class="login-form-margin">
        </div>
      </section>
      <button type="submit" nz-button *ngIf="!activeLoginType && !register" class="login-form-button login-form-margin" [nzType]="'primary'">登录</button>
      <button type="submit" nz-button *ngIf="activeLoginType && !register" class="login-form-button login-form-margin" [nzType]="'primary'">登录</button>
      <button type="submit" nz-button *ngIf="register" class="login-form-button login-form-margin" [nzType]="'primary'">确认注册</button>
       <section class="register" *ngIf="!register">
        没有账号？<a (click)="toggleLoginOfRegister()">注册</a>
       </section>
      <section class="register" *ngIf="register" >
        已有账号？<a (click)="toggleLoginOfRegister()">登录</a>
        </section>
    </form>
  </section>
</section>
